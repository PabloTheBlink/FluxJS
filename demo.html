<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FluxJS - Demostración Interactiva</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: #0a0a0a;
        color: #ffffff;
        min-height: 100vh;
        overflow-x: hidden;
      }

      .demo-container {
        position: relative;
        width: 100%;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .control-panel {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #333;
        z-index: 1000;
        max-width: 300px;
        backdrop-filter: blur(10px);
        /* Smooth scrolling for mobile */
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }

      .control-panel h3 {
        margin-bottom: 15px;
        color: #00ff88;
        text-align: center;
      }

      .control-group {
        margin-bottom: 15px;
      }

      .control-group label {
        display: block;
        margin-bottom: 5px;
        font-size: 12px;
        color: #ccc;
      }

      .control-group input,
      .control-group select {
        width: 100%;
        padding: 5px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid #555;
        border-radius: 3px;
        color: #fff;
      }

      .control-group input[type="range"] {
        accent-color: #00ff88;
      }

      .preset-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5px;
        margin-bottom: 15px;
      }

      .preset-btn {
        padding: 8px;
        background: linear-gradient(45deg, #00ff88, #0066cc);
        border: none;
        border-radius: 5px;
        color: white;
        cursor: pointer;
        font-size: 11px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .preset-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
      }

      .preset-btn:active {
        transform: scale(0.95);
      }

      /* Efecto especial para el botón ULTRA */
      .preset-btn:first-child {
        animation: ultraGlow 2s ease-in-out infinite alternate;
      }

      @keyframes ultraGlow {
        0% {
          box-shadow: 0 0 10px rgba(255, 0, 128, 0.5);
        }
        100% {
          box-shadow: 0 0 20px rgba(255, 0, 128, 0.8), 0 0 30px rgba(121, 40, 202, 0.6);
        }
      }

      .stats {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.8);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid #333;
        font-family: monospace;
        font-size: 12px;
        backdrop-filter: blur(10px);
        z-index: 1000;
      }

      .content {
        position: relative;
        z-index: 10;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        text-align: center;
        padding: 20px;
      }

      .title {
        font-size: 4rem;
        font-weight: bold;
        margin-bottom: 20px;
        background: linear-gradient(45deg, #00ff88, #0066cc, #ff006e);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
      }

      .subtitle {
        font-size: 1.5rem;
        margin-bottom: 30px;
        color: #ccc;
      }

      .features {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
      }

      .feature {
        background: rgba(0, 255, 136, 0.2);
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.9rem;
        border: 1px solid rgba(0, 255, 136, 0.3);
        backdrop-filter: blur(5px);
        animation: featurePulse 3s ease-in-out infinite;
      }

      @keyframes featurePulse {
        0%,
        100% {
          background: rgba(0, 255, 136, 0.2);
          box-shadow: 0 0 5px rgba(0, 255, 136, 0.3);
        }
        50% {
          background: rgba(0, 255, 136, 0.3);
          box-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }
      }

      .toggle-panel {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1001;
      }

      .toggle-btn {
        background: #00ff88;
        border: none;
        padding: 10px 15px;
        border-radius: 50px;
        color: #000;
        cursor: pointer;
        font-weight: bold;
      }

      /* Media Queries para Responsividad */
      @media (max-width: 1024px) {
        .control-panel {
          max-width: 280px;
          right: 10px;
          top: 10px;
        }

        .stats {
          left: 10px;
          top: 10px;
        }
      }

      @media (max-width: 768px) {
        .control-panel {
          position: fixed;
          top: auto;
          bottom: 0;
          left: 0;
          right: 0;
          max-width: none;
          border-radius: 15px 15px 0 0;
          max-height: 70vh;
          overflow-y: auto;
          transform: translateY(calc(100% - 60px));
          transition: transform 0.3s ease;
          padding: 15px 20px 20px;
        }

        .control-panel.open {
          transform: translateY(0);
        }

        .control-panel h3 {
          position: relative;
          padding-bottom: 10px;
          border-bottom: 2px solid #333;
          margin-bottom: 20px;
        }

        .control-panel h3::after {
          content: "👆 Desliza hacia arriba";
          position: absolute;
          top: -25px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 10px;
          color: #666;
          font-weight: normal;
        }

        .control-panel.open h3::after {
          content: "👇 Desliza hacia abajo";
        }

        .stats {
          position: fixed;
          top: 10px;
          left: 10px;
          right: 10px;
          font-size: 11px;
          padding: 8px 10px;
          display: flex;
          justify-content: space-between;
          flex-wrap: wrap;
          max-width: calc(100vw - 20px);
          backdrop-filter: blur(10px);
          background: rgba(0, 0, 0, 0.7);
          border-radius: 8px;
          z-index: 999;
        }

        .stats div {
          margin: 2px 5px;
          min-width: 45%;
          font-size: 10px;
        }

        .title {
          font-size: 2.5rem;
          margin-bottom: 15px;
          line-height: 1.1;
        }

        .subtitle {
          font-size: 1.2rem;
          margin-bottom: 20px;
        }

        .content {
          padding: 120px 15px 20px;
        }

        .features {
          grid-template-columns: 1fr;
          gap: 15px;
          margin-top: 30px;
        }

        .feature {
          padding: 15px;
        }

        .feature h4 {
          font-size: 14px;
        }

        .feature p {
          font-size: 12px;
        }

        .preset-buttons {
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
        }

        .preset-btn {
          padding: 10px 5px;
          font-size: 10px;
        }

        .control-group {
          margin-bottom: 12px;
        }

        .control-group label {
          font-size: 13px;
        }

        .control-group input,
        .control-group select {
          padding: 8px;
          font-size: 14px;
        }

        .toggle-panel {
          bottom: 15px;
          right: 50%;
          transform: translateX(50%);
        }
      }

      @media (max-width: 480px) {
        .title {
          font-size: 2rem;
        }

        .subtitle {
          font-size: 1rem;
        }

        .content {
          padding: 100px 10px 15px;
        }

        .features {
          margin-top: 20px;
        }

        .stats {
          font-size: 10px;
          padding: 6px 8px;
          max-height: 50px;
          overflow: hidden;
        }

        .stats div {
          min-width: 48%;
          font-size: 9px;
          margin: 1px 2px;
        }

        .preset-buttons {
          grid-template-columns: repeat(2, 1fr);
        }

        .preset-btn {
          font-size: 9px;
          padding: 8px 4px;
        }

        .control-panel {
          padding: 10px 15px 15px;
        }

        .control-group label {
          font-size: 12px;
        }
      }

      @media (max-width: 320px) {
        .title {
          font-size: 1.8rem;
        }

        .content {
          padding: 90px 8px 12px;
        }

        .stats div {
          min-width: 100%;
          text-align: center;
          margin: 1px 0;
        }
      }

      /* Mejoras para interacción táctil */
      @media (hover: none) and (pointer: coarse) {
        .preset-btn {
          padding: 12px 8px;
          min-height: 44px;
        }

        .control-group input[type="range"] {
          height: 44px;
        }

        .control-group input,
        .control-group select {
          min-height: 44px;
          font-size: 16px; /* Evita zoom en iOS */
        }
      }

      .hidden {
        display: none;
      }
    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8463L0S5MX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-8463L0S5MX");
    </script>
    <script src="https://api.devetty.es/resources/js/analytics.js"></script>
  </head>
  <body>
    <div class="demo-container">
      <!-- Stats Panel -->
      <div class="stats" id="stats">
        <div>FPS: <span id="fps">60</span></div>
        <div>Partículas: <span id="particle-count">50</span></div>
        <div>Conexiones: <span id="connections">Sí</span></div>
        <div>Animación: <span id="animation-type">float</span></div>
      </div>

      <!-- Main Content -->
      <div class="content">
        <h1 class="title">FluxJS ✨ ULTRA</h1>
        <p class="subtitle">Configuración Espectacular Completa - Todas las Funciones Activadas</p>
        <div class="features">
          <span class="feature">🌈 Arcoíris Dinámico</span>
          <span class="feature">⚡ 250+ Partículas</span>
          <span class="feature">🔗 Conexiones Curvas</span>
          <span class="feature">✨ Efectos Glow</span>
          <span class="feature">🎆 Trail Mágico</span>
          <span class="feature">🌟 Rotación & Pulsos</span>
        </div>
      </div>

      <!-- Control Panel -->
      <div class="control-panel" id="control-panel">
        <h3>Controles</h3>

        <!-- Preset Buttons -->
        <div class="preset-buttons">
          <button class="preset-btn" onclick="loadPreset('ultra')" style="background: linear-gradient(45deg, #ff0080, #7928ca, #ff0080); font-weight: bold; color: white; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5)">🚀 ULTRA</button>
          <button class="preset-btn" onclick="loadPreset('stars')">⭐ Estrellas</button>
          <button class="preset-btn" onclick="loadPreset('network')">🕸️ Red</button>
          <button class="preset-btn" onclick="loadPreset('bubbles')">🫧 Burbujas</button>
          <button class="preset-btn" onclick="loadPreset('spiral')">🌀 Espiral</button>
          <button class="preset-btn" onclick="loadPreset('galaxy')">🌌 Galaxia</button>
          <button class="preset-btn" onclick="loadPreset('matrix')">💚 Matrix</button>
          <button class="preset-btn" onclick="loadPreset('hearts')">💝 Corazones</button>
          <button class="preset-btn" onclick="loadPreset('fireworks')">🎆 Fuegos</button>
          <button class="preset-btn" onclick="loadPreset('cosmic')">🌠 Cósmico</button>
          <button class="preset-btn" onclick="loadPreset('cyber')">🤖 Cyber</button>
          <button class="preset-btn" onclick="loadPreset('aurora')">🌌 Aurora</button>
          <button class="preset-btn" onclick="loadPreset('storm')">⚡ Tormenta</button>
        </div>

        <!-- Controls -->
        <div class="control-group">
          <label for="particle-count-slider">Partículas: <span id="count-value">250</span></label>
          <input type="range" id="particle-count-slider" min="10" max="500" value="250" />
        </div>

        <div class="control-group">
          <label for="speed-slider">Velocidad: <span id="speed-value">0.3</span></label>
          <input type="range" id="speed-slider" min="0.1" max="2.0" step="0.1" value="0.3" />
        </div>

        <div class="control-group">
          <label for="size-slider">Tamaño: <span id="size-value">3</span></label>
          <input type="range" id="size-slider" min="1" max="10" value="3" />
        </div>

        <div class="control-group">
          <label for="color-type">Tipo de Color:</label>
          <select id="color-type">
            <option value="single">Simple</option>
            <option value="gradient">Gradiente</option>
            <option value="rainbow" selected>Arcoíris</option>
            <option value="random">Aleatorio</option>
          </select>
        </div>

        <div class="control-group">
          <label for="animation-type">Animación:</label>
          <select id="animation-type">
            <option value="float">Flotante</option>
            <option value="bounce">Rebote</option>
            <option value="spiral">Espiral</option>
            <option value="wave" selected>Onda</option>
            <option value="orbit">Órbita</option>
          </select>
        </div>

        <div class="control-group">
          <label for="shape-type">Forma:</label>
          <select id="shape-type">
            <option value="circle">Círculo</option>
            <option value="square">Cuadrado</option>
            <option value="triangle">Triángulo</option>
            <option value="star" selected>Estrella</option>
            <option value="heart">Corazón</option>
          </select>
        </div>

        <div class="control-group">
          <label for="connection-distance">Distancia Conexión: <span id="connection-distance-value">120</span></label>
          <input type="range" id="connection-distance" min="50" max="300" value="120" />
        </div>

        <div class="control-group">
          <label for="turbulence-slider">Turbulencia: <span id="turbulence-value">0.3</span></label>
          <input type="range" id="turbulence-slider" min="0" max="1" step="0.1" value="0.3" />
        </div>

        <div class="control-group">
          <label for="glow-size">Tamaño Glow: <span id="glow-size-value">15</span></label>
          <input type="range" id="glow-size" min="5" max="50" value="15" />
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="connections-toggle" checked /> Conexiones </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="glow-toggle" checked /> Efecto Glow </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="pulse-toggle" checked /> Pulsación </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="rotation-toggle" checked /> Rotación </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="twinkle-toggle" checked /> Centelleo </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="trail-toggle" checked /> Trail Mouse </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="physics-toggle" /> Física (Gravedad) </label>
        </div>

        <div class="control-group">
          <label> <input type="checkbox" id="curve-connections" checked /> Conexiones Curvas </label>
        </div>
      </div>
    </div>

    <script src="flux.js"></script>
    <script>
      let currentFlux = null;
      let stats = {
        fps: 0,
        frameCount: 0,
        lastTime: performance.now(),
      };

      // Presets espectaculares adicionales
      const spectacularPresets = {
        ultra: {
          count: 400, // Máximo número de partículas
          color: {
            type: "rainbow", // Colores dinámicos
            rainbowSpeed: 0.04, // Velocidad rápida del arcoíris
            randomPalette: ["#FF0080", "#7928CA", "#FF0080", "#FA00FF", "#8B5CF6", "#A855F7", "#C084FC", "#DDD6FE"],
          },
          size: {
            min: 1,
            max: 10, // Tamaños muy variados
            pulse: true,
            pulseSpeed: 0.06,
            pulseIntensity: 1.5, // Pulsación intensa
            distribution: "exponential",
          },
          speed: {
            min: 0.1,
            max: 2.0, // Velocidades muy variadas
            acceleration: 0.003, // Aceleración constante
            turbulence: 1.0, // Máxima turbulencia
            turbulenceFrequency: 0.03,
          },
          connections: {
            enabled: true,
            distance: 150, // Conexiones de larga distancia
            animated: true,
            curve: true, // Conexiones curvas
            opacity: 0.7,
            width: 2, // Líneas más gruesas
            maxConnections: 6, // Máximo número de conexiones
            animationSpeed: 0.05,
          },
          animation: {
            type: "spiral",
            speed: 2.0, // Velocidad máxima
            direction: "random",
            wave: { amplitude: 100, frequency: 0.025, speed: 0.04 },
            orbit: { radius: 250, speed: 0.02 },
          },
          effects: {
            glow: true,
            glowColor: "#FF0080",
            glowSize: 30, // Glow masivo
            shadow: true,
            shadowColor: "rgba(255,0,128,0.6)",
            shadowBlur: 15,
            twinkle: true,
            twinkleSpeed: 0.08, // Centelleo rápido
          },
          shape: {
            type: "star", // Formas estelares
            rotation: true,
            rotationSpeed: 0.05, // Rotación rápida
            sides: 8, // Estrellas de 8 puntas
          },
          physics: {
            gravity: 0,
            friction: 0,
            wind: 0.04,
            windDirection: Math.PI / 4, // Viento dinámico
            bounce: 0.95,
          },
          mouse: {
            interact: true,
            distance: 300, // Interacción de largo alcance
            attraction: 0.15, // Atracción fuerte
            trail: true,
            trailLength: 80,
            trailWidth: 20, // Trail masivo
            trailColor: "#FF0080",
            trailGlow: true,
            trailFadeTime: 3000,
            sparkles: true,
            magnetism: true,
            magnetismStrength: 0.05,
            touch: { enabled: true, multiTouch: true, touchDistance: 350, touchAttraction: 0.2 },
          },
          opacity: {
            min: 0.4,
            max: 1.0,
            fadeIn: true,
            fadeInDuration: 1000,
            flicker: true,
            flickerSpeed: 0.1, // Parpadeo rápido
          },
          canvas: {
            background: "radial-gradient(circle at 50% 50%, #1a0033 0%, #000000 70%)", // Fondo espectacular
            opacity: 1,
          },
        },

        fireworks: {
          count: 180,
          color: {
            type: "random",
            randomPalette: ["#FF6B6B", "#FFD93D", "#6BCF7F", "#4D96FF", "#9B59B6", "#FF8C42", "#FF3366", "#00D4AA"],
          },
          size: { min: 2, max: 8, pulse: true, pulseSpeed: 0.05, pulseIntensity: 1.2 },
          speed: { min: 0.3, max: 1.5, turbulence: 0.8 },
          connections: { enabled: true, distance: 80, animated: true, curve: true, opacity: 0.6 },
          animation: { type: "spiral", speed: 1.5 },
          effects: { glow: true, glowSize: 20, twinkle: true, twinkleSpeed: 0.06 },
          shape: { type: "star", rotation: true, rotationSpeed: 0.04 },
          physics: { gravity: -0.02, wind: 0.03 },
          mouse: {
            interact: true,
            distance: 250,
            attraction: 0.12,
            trail: true,
            trailLength: 60,
            trailWidth: 15,
            sparkles: true,
            magnetism: true,
          },
        },

        cosmic: {
          count: 300,
          color: {
            type: "gradient",
            gradient: ["#8B00FF", "#4B0082", "#9400D3", "#8A2BE2", "#DA70D6", "#FF69B4", "#FF1493"],
          },
          size: { min: 1, max: 5, distribution: "exponential", pulse: true },
          speed: { min: 0.05, max: 0.4, turbulence: 0.4 },
          connections: { enabled: true, distance: 100, maxConnections: 4, animated: true, opacity: 0.4 },
          animation: { type: "orbit", orbit: { radius: 200, speed: 0.008 } },
          effects: { glow: true, glowColor: "#8B00FF", glowSize: 12, twinkle: true },
          shape: { type: "circle", rotation: false },
          opacity: { min: 0.3, max: 0.9, flicker: true },
        },

        cyber: {
          count: 120,
          color: {
            type: "gradient",
            gradient: ["#00FF41", "#00D4AA", "#00BFFF", "#1E90FF", "#0080FF"],
          },
          size: { min: 1, max: 4, pulse: false },
          speed: { min: 0.4, max: 1.2, acceleration: 0.002 },
          connections: {
            enabled: true,
            distance: 150,
            animated: true,
            width: 2,
            opacity: 0.7,
            maxConnections: 5,
          },
          animation: { type: "wave", direction: "right", speed: 2 },
          effects: {
            glow: true,
            glowColor: "#00FF41",
            glowSize: 18,
            shadow: true,
            shadowColor: "rgba(0,255,65,0.5)",
          },
          shape: { type: "square", rotation: true, rotationSpeed: 0.03 },
          physics: { gravity: 0, friction: 0.01 },
        },

        aurora: {
          count: 200,
          color: {
            type: "gradient",
            gradient: ["#00FF7F", "#32CD32", "#7FFF00", "#ADFF2F", "#98FB98", "#90EE90"],
          },
          size: { min: 2, max: 6, pulse: true, pulseSpeed: 0.02, pulseIntensity: 0.6 },
          speed: { min: 0.1, max: 0.6, turbulence: 0.6 },
          connections: { enabled: true, distance: 120, curve: true, animated: true, opacity: 0.5 },
          animation: {
            type: "wave",
            wave: { amplitude: 80, frequency: 0.02, speed: 0.03 },
          },
          effects: {
            glow: true,
            glowColor: "#00FF7F",
            glowSize: 25,
            twinkle: true,
            twinkleSpeed: 0.03,
          },
          shape: { type: "circle", rotation: false },
          physics: { wind: 0.02, windDirection: Math.PI / 3 },
        },

        storm: {
          count: 150,
          color: {
            type: "random",
            randomPalette: ["#FFD700", "#FFFF00", "#FFA500", "#FF4500", "#DC143C", "#8B0000"],
          },
          size: { min: 1, max: 7, pulse: true, pulseSpeed: 0.08, pulseIntensity: 1.5 },
          speed: { min: 0.5, max: 2.0, turbulence: 1.2, acceleration: 0.005 },
          connections: {
            enabled: true,
            distance: 90,
            animated: true,
            width: 1.5,
            opacity: 0.8,
            curve: false,
          },
          animation: { type: "bounce", speed: 1.8 },
          effects: {
            glow: true,
            glowColor: "#FFD700",
            glowSize: 22,
            twinkle: true,
            twinkleSpeed: 0.1,
            shadow: true,
            shadowBlur: 10,
          },
          shape: { type: "triangle", rotation: true, rotationSpeed: 0.06 },
          physics: { gravity: 0.03, bounce: 0.95, wind: 0.05 },
          opacity: { min: 0.4, max: 1.0, flicker: true, flickerSpeed: 0.08 },
        },
      };

      // Initialize with SPECTACULAR configuration - All features enabled!
      function initFlux() {
        if (currentFlux) {
          currentFlux.destroy();
        }

        currentFlux = new FluxJS({
          // Configuración básica
          container: document.body,
          count: 250, // Muchas partículas para efecto espectacular

          // Sistema de colores avanzado - Arcoíris
          color: {
            type: "rainbow", // Efecto arcoíris espectacular
            rainbowSpeed: 0.03, // Velocidad del arcoíris
            value: "#00ff88", // Color fallback
            gradient: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FECA57", "#FF8C42", "#FF3366", "#9B59B6"],
            randomPalette: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FECA57", "#FF8C42", "#FF3366", "#9B59B6", "#FFD700", "#FF69B4"],
          },

          // Configuración de tamaño con efectos
          size: {
            min: 1,
            max: 6, // Tamaños más grandes
            pulse: true, // Pulsación activada
            pulseSpeed: 0.03,
            pulseIntensity: 0.8, // Pulsación intensa
            distribution: "gaussian", // Distribución gaussiana
          },

          // Configuración de velocidad avanzada
          speed: {
            min: 0.1,
            max: 0.8, // Velocidades más altas
            acceleration: 0.001,
            turbulence: 0.3, // Turbulencia para movimiento más natural
            turbulenceFrequency: 0.02,
          },

          // Sistema de opacidad mejorado
          opacity: {
            min: 0.4,
            max: 1.0,
            fadeIn: true,
            fadeInDuration: 1500,
            flicker: true, // Efecto de parpadeo
            flickerSpeed: 0.05,
          },

          // Sistema de conexiones mejorado - ESPECTACULAR
          connections: {
            enabled: true,
            distance: 120, // Mayor distancia de conexión
            color: "#00ff88",
            opacity: 0.5, // Más visible
            width: 1.5, // Líneas más gruesas
            maxConnections: 3, // Más conexiones por partícula
            animated: true, // Conexiones animadas
            animationSpeed: 0.03,
            curve: true, // Conexiones curvas
          },

          // Configuración de interacción con mouse mejorada
          mouse: {
            interact: true,
            distance: 200, // Mayor distancia de interacción
            attraction: 0.08, // Más atracción
            repulsion: false,
            repulsionForce: 0.1,
            trail: true, // Trail del mouse activado
            trailLength: 50, // Trail más largo
            trailWidth: 12, // Trail más ancho
            trailColor: "#8B00FF", // Color morado brillante
            trailGlow: true, // Glow del trail
            trailFadeTime: 2000, // Desvanecimiento más lento
            sparkles: true, // Partículas brillantes
            magnetism: true, // Magnetismo activado
            magnetismStrength: 0.03,
            touch: {
              enabled: true,
              multiTouch: true, // Multi-touch para móviles
              touchDistance: 250,
              touchAttraction: 0.1,
            },
          },

          // Configuración de gravedad y física
          physics: {
            gravity: 0,
            gravityDirection: "down",
            friction: 0,
            bounce: 0.9,
            wind: 0.01, // Viento sutil
            windDirection: Math.PI / 6, // Dirección del viento
          },

          // Efectos especiales - TODOS ACTIVADOS
          effects: {
            glow: true, // Efecto glow
            glowColor: "#ffffff",
            glowSize: 15, // Glow más grande
            shadow: true, // Sombras
            shadowColor: "rgba(0,255,136,0.4)",
            shadowBlur: 8,
            shadowOffset: { x: 3, y: 3 },
            twinkle: true, // Efecto de centelleo
            twinkleSpeed: 0.04,
          },

          // Configuración de formas
          shape: {
            type: "star", // Estrellas por defecto
            sides: 6,
            rotation: true, // Rotación activada
            rotationSpeed: 0.02,
          },

          // Configuración responsive
          responsive: {
            enabled: true,
            breakpoints: {
              mobile: { width: 768, particles: 0.3, maxFPS: 30, simplifyEffects: false },
              tablet: { width: 1024, particles: 0.6, maxFPS: 45, simplifyEffects: false },
              desktop: { width: 1920, particles: 1.0, maxFPS: 60, simplifyEffects: false },
            },
            scaleWithContainer: true,
            detectDevice: true,
          },

          // Sistema de animaciones expandido
          animation: {
            type: "wave", // Animación de onda
            speed: 1.2, // Velocidad de animación
            direction: "random",
            wave: {
              amplitude: 60, // Amplitud de onda más grande
              frequency: 0.015,
              speed: 0.025,
            },
            orbit: {
              centerX: null,
              centerY: null,
              radius: 150,
              speed: 0.015,
            },
          },

          // Configuración de fondo y canvas
          canvas: {
            background: "radial-gradient(circle at center, #0a0a0a 0%, #000000 100%)",
            blur: false,
            blurAmount: 1,
            zIndex: 1,
            opacity: 1,
          },

          // Configuración de rendimiento
          performance: {
            maxFPS: 60,
            enableWebGL: false,
            optimizeConnections: true,
            pauseOnBlur: true,
            adaptiveQuality: true,
            mobile: {
              reducedMotion: false,
              batteryOptimization: true,
              memoryLimit: 150, // Límite más alto para mejor experiencia
              useTransform3d: true,
            },
          },

          // Eventos y callbacks
          events: {
            onInit: (flux) => {
              console.log("🎆 FluxJS iniciado con configuración ESPECTACULAR!");
              console.log("Partículas:", flux.config.count);
              console.log("Efectos especiales: TODOS ACTIVADOS ✨");
            },
            onStart: () => {
              console.log("🚀 FluxJS started!");
              startStatsMonitor();
            },
            onParticleClick: (particle, flux) => {
              console.log("🎯 Partícula clickeada!", particle);
              // Crear efecto de explosión en la partícula
              flux.explode(particle.x, particle.y, 15, 300);
            },
            onParticleHover: (particle, flux) => {
              // Hacer que la partícula brille más al pasar el mouse
              particle.glowIntensity = 2;
            },
          },
        });
      }

      // Load preset configurations
      function loadPreset(presetName) {
        if (currentFlux) {
          currentFlux.destroy();
        }

        // Verificar si es un preset personalizado espectacular
        if (spectacularPresets[presetName]) {
          currentFlux = new FluxJS({
            container: document.body,
            ...spectacularPresets[presetName],
            events: {
              onStart: () => {
                console.log(`🎨 Preset ${presetName} cargado!`);
                startStatsMonitor();
              },
            },
          });
        } else {
          // Usar presets originales de FluxJS
          currentFlux = createFlux[presetName](document.body);
        }

        updateStatsDisplay();
        updateControlsFromFlux();
      }

      // Update controls from current flux configuration
      function updateControlsFromFlux() {
        if (!currentFlux) return;

        const config = currentFlux.config;

        // Controles básicos
        document.getElementById("particle-count-slider").value = config.count;
        document.getElementById("count-value").textContent = config.count;

        document.getElementById("speed-slider").value = (config.speed.min + config.speed.max) / 2;
        document.getElementById("speed-value").textContent = ((config.speed.min + config.speed.max) / 2).toFixed(1);

        document.getElementById("size-slider").value = config.size.max;
        document.getElementById("size-value").textContent = config.size.max;

        // Controles de apariencia y efectos
        document.getElementById("color-type").value = config.color.type || "single";
        document.getElementById("animation-type").value = config.animation.type || "float";
        document.getElementById("shape-type").value = config.shape.type || "circle";

        // Controles de conexiones
        document.getElementById("connections-toggle").checked = config.connections.enabled;
        document.getElementById("connection-distance").value = config.connections.distance || 100;
        document.getElementById("connection-distance-value").textContent = config.connections.distance || 100;
        document.getElementById("curve-connections").checked = config.connections.curve || false;

        // Controles de efectos
        document.getElementById("glow-toggle").checked = config.effects.glow || false;
        document.getElementById("glow-size").value = config.effects.glowSize || 15;
        document.getElementById("glow-size-value").textContent = config.effects.glowSize || 15;
        document.getElementById("pulse-toggle").checked = config.size.pulse || false;
        document.getElementById("rotation-toggle").checked = config.shape.rotation || false;
        document.getElementById("twinkle-toggle").checked = config.effects.twinkle || false;

        // Controles de física y movimiento
        document.getElementById("physics-toggle").checked = (config.physics.gravity || 0) > 0;
        document.getElementById("turbulence-slider").value = config.speed.turbulence || 0;
        document.getElementById("turbulence-value").textContent = (config.speed.turbulence || 0).toFixed(1);

        // Controles de mouse
        document.getElementById("trail-toggle").checked = config.mouse.trail || false;
      }

      // Control event listeners
      document.getElementById("particle-count-slider").addEventListener("input", function () {
        const value = parseInt(this.value);
        document.getElementById("count-value").textContent = value;
        if (currentFlux) {
          currentFlux.setCount(value);
        }
      });

      document.getElementById("speed-slider").addEventListener("input", function () {
        const value = parseFloat(this.value);
        document.getElementById("speed-value").textContent = value.toFixed(1);
        if (currentFlux) {
          currentFlux.updateConfig({
            speed: {
              min: value * 0.5,
              max: value * 1.5,
            },
          });
        }
      });

      document.getElementById("size-slider").addEventListener("input", function () {
        const value = parseInt(this.value);
        document.getElementById("size-value").textContent = value;
        if (currentFlux) {
          currentFlux.updateConfig({
            size: {
              min: Math.max(1, value - 2),
              max: value,
            },
          });
        }
      });

      document.getElementById("color-type").addEventListener("change", function () {
        if (!currentFlux) return;

        const colorConfigs = {
          single: { type: "single", value: "#00ff88" },
          gradient: {
            type: "gradient",
            gradient: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4"],
          },
          rainbow: { type: "rainbow", rainbowSpeed: 0.02 },
          random: {
            type: "random",
            randomPalette: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FECA57"],
          },
        };

        currentFlux.setColor(colorConfigs[this.value]);
      });

      document.getElementById("animation-type").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.setAnimation(this.value);
        }
      });

      document.getElementById("shape-type").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            shape: { type: this.value },
          });
        }
      });

      document.getElementById("connections-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            connections: { enabled: this.checked },
          });
        }
      });

      document.getElementById("glow-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.setEffects({
            glow: this.checked,
            glowColor: "#00ff88",
            glowSize: 15,
          });
        }
      });

      document.getElementById("pulse-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            size: {
              pulse: this.checked,
              pulseSpeed: 0.02,
              pulseIntensity: 0.5,
            },
          });
        }
      });

      document.getElementById("physics-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.setPhysics({
            gravity: this.checked ? 0.05 : 0,
            gravityDirection: "down",
          });
        }
      });

      // Nuevos event listeners para controles avanzados
      document.getElementById("connection-distance").addEventListener("input", function () {
        const value = parseInt(this.value);
        document.getElementById("connection-distance-value").textContent = value;
        if (currentFlux) {
          currentFlux.updateConfig({
            connections: { distance: value },
          });
        }
      });

      document.getElementById("turbulence-slider").addEventListener("input", function () {
        const value = parseFloat(this.value);
        document.getElementById("turbulence-value").textContent = value.toFixed(1);
        if (currentFlux) {
          currentFlux.updateConfig({
            speed: { turbulence: value },
          });
        }
      });

      document.getElementById("glow-size").addEventListener("input", function () {
        const value = parseInt(this.value);
        document.getElementById("glow-size-value").textContent = value;
        if (currentFlux) {
          currentFlux.updateConfig({
            effects: { glow: true, glowSize: value },
          });
        }
      });

      document.getElementById("rotation-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            shape: { rotation: this.checked, rotationSpeed: 0.02 },
          });
        }
      });

      document.getElementById("twinkle-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            effects: { twinkle: this.checked, twinkleSpeed: 0.04 },
          });
        }
      });

      document.getElementById("trail-toggle").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            mouse: { trail: this.checked, trailLength: 50, trailWidth: 12 },
          });
        }
      });

      document.getElementById("curve-connections").addEventListener("change", function () {
        if (currentFlux) {
          currentFlux.updateConfig({
            connections: { curve: this.checked },
          });
        }
      });

      // Stats monitoring
      function startStatsMonitor() {
        function updateStats() {
          stats.frameCount++;
          const now = performance.now();

          if (now - stats.lastTime >= 1000) {
            stats.fps = Math.round((stats.frameCount * 1000) / (now - stats.lastTime));
            stats.frameCount = 0;
            stats.lastTime = now;

            updateStatsDisplay();
          }

          requestAnimationFrame(updateStats);
        }

        updateStats();
      }

      function updateStatsDisplay() {
        document.getElementById("fps").textContent = stats.fps;

        if (currentFlux) {
          document.getElementById("particle-count").textContent = currentFlux.particles.length;
          document.getElementById("connections").textContent = currentFlux.config.connections.enabled ? "Sí" : "No";
          document.getElementById("animation-type").textContent = currentFlux.config.animation.type || "float";
        }
      }

      // Mobile panel toggle with gesture support
      let touchStartY = 0;
      let panelStartTransform = 0;
      let isDragging = false;

      function togglePanel() {
        const panel = document.getElementById("control-panel");
        panel.classList.toggle("open");
      }

      // Enhanced mobile panel with swipe gestures
      function initializeMobilePanel() {
        const panel = document.getElementById("control-panel");

        // Touch start
        panel.addEventListener("touchstart", function (e) {
          if (window.innerWidth <= 768) {
            touchStartY = e.touches[0].clientY;
            const transform = getComputedStyle(panel).transform;
            if (transform !== "none") {
              const matrix = new DOMMatrix(transform);
              panelStartTransform = matrix.m42; // translateY value
            } else {
              panelStartTransform = panel.classList.contains("open") ? 0 : panel.offsetHeight - 60;
            }
            isDragging = true;
            panel.style.transition = "none";
          }
        });

        // Touch move
        panel.addEventListener("touchmove", function (e) {
          if (isDragging && window.innerWidth <= 768) {
            e.preventDefault();
            const touchY = e.touches[0].clientY;
            const deltaY = touchY - touchStartY;
            const newTransform = Math.max(0, Math.min(panel.offsetHeight - 60, panelStartTransform + deltaY));

            panel.style.transform = `translateY(${newTransform}px)`;
          }
        });

        // Touch end
        panel.addEventListener("touchend", function (e) {
          if (isDragging && window.innerWidth <= 768) {
            isDragging = false;
            panel.style.transition = "transform 0.3s ease";

            const currentTransform = parseFloat(panel.style.transform.replace("translateY(", "").replace("px)", "")) || 0;
            const threshold = panel.offsetHeight * 0.3;

            if (currentTransform < threshold) {
              panel.classList.add("open");
              panel.style.transform = "";
            } else {
              panel.classList.remove("open");
              panel.style.transform = "";
            }
          }
        });

        // Prevent scrolling when panel is being dragged
        document.addEventListener(
          "touchmove",
          function (e) {
            if (isDragging && window.innerWidth <= 768) {
              e.preventDefault();
            }
          },
          { passive: false }
        );
      }

      // Initialize mobile enhancements
      function initializeMobileEnhancements() {
        // Auto-hide control panel on mobile after 5 seconds of inactivity
        let inactivityTimer;

        function resetInactivityTimer() {
          if (window.innerWidth <= 768) {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
              const panel = document.getElementById("control-panel");
              if (panel.classList.contains("open")) {
                panel.classList.remove("open");
              }
            }, 5000);
          }
        }

        // Reset timer on any interaction
        ["touchstart", "touchmove", "click"].forEach((event) => {
          document.addEventListener(event, resetInactivityTimer);
        });

        // Handle orientation change
        window.addEventListener("orientationchange", function () {
          setTimeout(() => {
            if (currentFlux) {
              currentFlux.resize();
              updateStatsDisplay();
            }
          }, 100);
        });

        // Optimize for mobile performance
        if (window.innerWidth <= 768) {
          // Reduce particle count on mobile for better performance
          const slider = document.getElementById("particle-count-slider");
          if (parseInt(slider.value) > 100) {
            slider.value = 50;
            document.getElementById("count-value").textContent = 50;
            if (currentFlux) {
              currentFlux.setCount(50);
            }
          }
        }
      }

      // Special effects functions
      function createExplosion(event) {
        if (currentFlux) {
          const rect = document.body.getBoundingClientRect();
          const x = event.clientX - rect.left;
          const y = event.clientY - rect.top;

          currentFlux.explode(x, y, 8, 200);

          // Add temporary particles for explosion effect
          for (let i = 0; i < 20; i++) {
            setTimeout(() => {
              currentFlux.addParticle(x + (Math.random() - 0.5) * 100, y + (Math.random() - 0.5) * 100, {
                size: Math.random() * 8 + 2,
                opacity: 0.8,
              });
            }, i * 50);
          }
        }
      }

      // Double click for explosion effect
      document.addEventListener("dblclick", createExplosion);

      // Keyboard shortcuts
      document.addEventListener("keydown", function (event) {
        switch (event.key) {
          case "0": // Nuevo: ULTRA preset
            loadPreset("ultra");
            break;
          case "1":
            loadPreset("stars");
            break;
          case "2":
            loadPreset("network");
            break;
          case "3":
            loadPreset("bubbles");
            break;
          case "4":
            loadPreset("spiral");
            break;
          case "5":
            loadPreset("galaxy");
            break;
          case "6":
            loadPreset("matrix");
            break;
          case "7":
            loadPreset("hearts");
            break;
          case "8":
            loadPreset("fireworks");
            break;
          case "9":
            loadPreset("cosmic");
            break;
          case " ":
            event.preventDefault();
            if (currentFlux.isRunning) {
              currentFlux.stop();
            } else {
              currentFlux.start();
            }
            break;
        }
      });

      // Initialize on page load
      window.addEventListener("load", function () {
        initFlux();
        initializeMobilePanel();
        initializeMobileEnhancements();
      });

      // Handle window resize
      window.addEventListener("resize", function () {
        if (currentFlux) {
          setTimeout(() => {
            updateStatsDisplay();
          }, 100);
        }
      });

      // Add some random effects periodically
      setInterval(() => {
        if (currentFlux && Math.random() < 0.1) {
          const x = Math.random() * window.innerWidth;
          const y = Math.random() * window.innerHeight;

          if (Math.random() < 0.5) {
            currentFlux.attract(x, y, 2, 100);
          } else {
            // Add a special particle
            currentFlux.addParticle(x, y, {
              size: Math.random() * 10 + 5,
              opacity: 0.8,
            });
          }
        }
      }, 5000);

      console.log("🎆 FluxJS Demo ESPECTACULAR cargado!");
      console.log("");
      console.log("🚀 CONFIGURACIÓN INICIAL: ULTRA ESPECTACULAR");
      console.log("✨ Todas las características activadas");
      console.log("🌈 Colores arcoíris dinámicos");
      console.log("⚡ 250+ partículas con efectos avanzados");
      console.log("");

      // Mobile-specific instructions
      if (window.innerWidth <= 768) {
        console.log("📱 Modo móvil optimizado");
        console.log("Instrucciones móviles:");
        console.log("• Toca el botón ⚙️ para abrir controles");
        console.log("• Desliza el panel hacia arriba/abajo");
        console.log("• Toca dos veces para efectos de explosión");
        console.log("• Prueba el preset 🚀 ULTRA para máximo impacto");
        console.log("• El panel se oculta automáticamente tras 5s");
      } else {
        console.log("🖥️ Modo escritorio con todas las funciones");
        console.log("Atajos de teclado:");
        console.log("• 0: 🚀 ULTRA (máximo espectacular)");
        console.log("• 1-9: Presets espectaculares");
        console.log("• Espacio: Pausar/Reanudar");
        console.log("• Doble-click: Efecto explosión");
        console.log("");
        console.log("🎛️ Controles avanzados disponibles:");
        console.log("• Turbulencia, conexiones curvas, efectos glow");
        console.log("• Trail del mouse, rotación, centelleo");
        console.log("• Física avanzada y configuración completa");
      }
    </script>
  </body>
</html>
